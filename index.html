<html>
<head>
  <title>Pi day madness!</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@700&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0px;
      padding: 0px;
      word-wrap: break-word;
      font-family: "Roboto Mono", monospace;
      font-optical-sizing: auto;
      font-weight: 700;
      font-style: normal;
      font-size:3em;
      background-color: #110;
      color: #fee;
      text-align: justify;
      min-height: 100vh;
      width: 100%;
    }

    #color {
      background: linear-gradient(magenta, cyan, yellow, white);
      display: block;
      position: relative;
      min-height: 100vh;
      width: 100%;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    #nondecimal {
      float: left;
    }

    #decimal {
      position: relative;
      display: block;
      padding-left: 3em; 
    }
      
  </style>
<head>
<body>
  <div id="color">
    <span id="nondecimal">3.<br /></span>
    <span id="decimals">14</span>
  </div>
<script type="module">
  import { calc } from './machin-pi.js';
  
  let digits = 2;
  let speed = 500;
  let maxSpeed = 16;

  const decimals = document.getElementById('decimals');
  
  function draw() {
    speed = Math.max(maxSpeed, speed * 0.8);
    setTimeout(draw, speed);
    decimals.innerHTML = calc(++digits).substring(0, digits+2);
  }
  
  setTimeout(draw, speed);
</script>
</body>
</html>
